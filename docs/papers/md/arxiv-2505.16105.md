# Sums and differences of sets ( improvement over AlphaEvolve )

Sums and differences of sets ( improvement over AlphaEvolve )

# Sums and differences of sets ( improvement over AlphaEvolve )
Robert Gerbicz1 Halasztelek, Hungary.robert.gerbicz@gmail.com(Date: May 22, 2025.)
###### Abstract.

On May 14, 2025, DeepMind announced that AlphaEvolve, a large language model applied to a set of mathematical problems, had matched or exceeded the best known bounds on several problems. In the case of the sum and difference of sets problem, AlphaEvolve, using a set of 54265542655426554265 integers, improved the known lower bound of Î¸=1.14465ğœƒ1.14465\theta=1.14465italic_Î¸ = 1.14465 to Î¸=1.1584ğœƒ1.1584\theta=1.1584italic_Î¸ = 1.1584. In this paper, we present an improved bound Î¸=1.173050ğœƒ1.173050\theta=1.173050italic_Î¸ = 1.173050 using an explicit construction of a U set that contains more than 1043546superscript104354610^{43546}10 start_POSTSUPERSCRIPT 43546 end_POSTSUPERSCRIPT elements. For fast integer and floating-point arithmetic, we used the (free) GMP library.

###### Key words and phrases: 
Sumset, Difference set, AlphaEvolve
###### 1991 Mathematics Subject Classification: 
11B75.
## 1. Introduction and preliminaries

Let K>1ğ¾1K>1italic_K > 1 be a real number. In [3] the authors asked for the largest possible value of Î¸ğœƒ\thetaitalic_Î¸ such that there exist integer sets Ağ´Aitalic_A and BğµBitalic_B, with |A|ğ´|A|| italic_A | arbitrarily large, satisying the condition that for some constant câ¢(K)>0ğ‘ğ¾0c(K)>0italic_c ( italic_K ) > 0:
|A+B|â‰¤Kâ¢|A|â¢andâ¢|Aâˆ’B|â‰¥câ¢(K)â‹…|A+B|Î¸ğ´ğµğ¾ğ´andğ´ğµâ‹…ğ‘ğ¾superscriptğ´ğµğœƒ|A+B|\leq K|A|~{}\text{and}~{}|A-B|\geq c(K)\cdot|A+B|^{\theta}| italic_A + italic_B | â‰¤ italic_K | italic_A | and | italic_A - italic_B | â‰¥ italic_c ( italic_K ) â‹… | italic_A + italic_B | start_POSTSUPERSCRIPT italic_Î¸ end_POSTSUPERSCRIPT(1.1)
They showed that Î¸â‰¥1+logâ¡(|Uâˆ’U||U+U|)logâ¡(2â‹…maxâ¡(U)+1)ğœƒ1ğ‘ˆğ‘ˆğ‘ˆğ‘ˆâ‹…2ğ‘ˆ1\theta\geq 1+\frac{\log{(\frac{|U-U|}{|U+U|})}}{\log{(2\cdot\max(U)+1)}}italic_Î¸ â‰¥ 1 + divide start_ARG roman_log ( divide start_ARG | italic_U - italic_U | end_ARG start_ARG | italic_U + italic_U | end_ARG ) end_ARG start_ARG roman_log ( 2 â‹… roman_max ( italic_U ) + 1 ) end_ARG where Uğ‘ˆUitalic_U is a set of non-negative integers containing zero.

In their constructions, they started from the set V=Vâ¢(m,L)={(x1,â€¦,xm)âˆˆâ„•m:x1+â€¦+xmâ‰¤L}ğ‘‰ğ‘‰ğ‘šğ¿conditional-setsubscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šsuperscriptâ„•ğ‘šsubscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šğ¿V=V(m,L)=\{(x_{1},\ldots,x_{m})\in\mathbb{N}^{m}:x_{1}+\ldots+x_{m}\leq L\}italic_V = italic_V ( italic_m , italic_L ) = { ( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) âˆˆ blackboard_N start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT : italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT + â€¦ + italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT â‰¤ italic_L }, where mâ‰¥0ğ‘š0m\geq 0italic_m â‰¥ 0 and Lâ‰¥0ğ¿0L\geq 0italic_L â‰¥ 0. From combinatorics, it is well known that |Vâ¢(m,L)|=(m+Lm)ğ‘‰ğ‘šğ¿binomialğ‘šğ¿ğ‘š|V(m,L)|=\binom{m+L}{m}| italic_V ( italic_m , italic_L ) | = ( FRACOP start_ARG italic_m + italic_L end_ARG start_ARG italic_m end_ARG ).

To obtain the integers of the set, they used the function f:(x1,â€¦â¢xm)â†’âˆ‘k=0mâˆ’1xkâ‹…Lk:ğ‘“â†’subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šsuperscriptsubscriptğ‘˜0ğ‘š1â‹…subscriptğ‘¥ğ‘˜subscriptğ¿ğ‘˜f:(x_{1},\ldots x_{m})\rightarrow\sum_{k=0}^{m-1}x_{k}\cdot L_{k}italic_f : ( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) â†’ âˆ‘ start_POSTSUBSCRIPT italic_k = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_m - 1 end_POSTSUPERSCRIPT italic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT â‹… italic_L start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT, where L0=1subscriptğ¿01L_{0}=1italic_L start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT = 1 and Lk=2â¢Lâ‹…Lkâˆ’1+1subscriptğ¿ğ‘˜â‹…2ğ¿subscriptğ¿ğ‘˜11L_{k}=2L\cdot L_{k-1}+1italic_L start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT = 2 italic_L â‹… italic_L start_POSTSUBSCRIPT italic_k - 1 end_POSTSUBSCRIPT + 1 for k>0ğ‘˜0k>0italic_k > 0. It is easy to see that the function fğ‘“fitalic_f is injective on both V+Vğ‘‰ğ‘‰V+Vitalic_V + italic_V and Vâˆ’Vğ‘‰ğ‘‰V-Vitalic_V - italic_V. The required integers of the Uğ‘ˆUitalic_U set were then defined by U={fâ¢(x):xâˆˆVâ¢(m,L)}ğ‘ˆconditional-setğ‘“ğ‘¥ğ‘¥ğ‘‰ğ‘šğ¿U=\{f(x):x\in V(m,L)\}italic_U = { italic_f ( italic_x ) : italic_x âˆˆ italic_V ( italic_m , italic_L ) }.

Using formulas for |Vâˆ’V|,|V+V|ğ‘‰ğ‘‰ğ‘‰ğ‘‰|V-V|,~{}|V+V|| italic_V - italic_V | , | italic_V + italic_V | and maxâ¡(U)ğ‘ˆ\max(U)roman_max ( italic_U ) they were able to establish a lower bound of Î¸=1.14465ğœƒ1.14465\theta=1.14465italic_Î¸ = 1.14465. The known upper bound is Î¸â‰¤43ğœƒ43\theta\leq\frac{4}{3}italic_Î¸ â‰¤ divide start_ARG 4 end_ARG start_ARG 3 end_ARG. DeepMindâ€™s AlphaEvolve (see [4]), using a large language model, improved the lower bound to Î¸=1.1584ğœƒ1.1584\theta=1.1584italic_Î¸ = 1.1584.

My idea was based on the observation that for x1+â€¦+xm=sâ‰¤Lsubscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šğ‘ ğ¿x_{1}+\ldots+x_{m}=s\leq Litalic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT + â€¦ + italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT = italic_s â‰¤ italic_L, the average value of each xisubscriptğ‘¥ğ‘–x_{i}italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT is only smâ‰¤Lmğ‘ ğ‘šğ¿ğ‘š\frac{s}{m}\leq\frac{L}{m}divide start_ARG italic_s end_ARG start_ARG italic_m end_ARG â‰¤ divide start_ARG italic_L end_ARG start_ARG italic_m end_ARG. So for vectors xğ‘¥xitalic_x and xâ€²superscriptğ‘¥â€²x^{\prime}italic_x start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT, the average value of xk+xkâ€²subscriptğ‘¥ğ‘˜subscriptsuperscriptğ‘¥â€²ğ‘˜x_{k}+x^{\prime}_{k}italic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT + italic_x start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT is still relatively small. This suggests that we might improve the value of Î¸ğœƒ\thetaitalic_Î¸ by reducing the large Lksubscriptğ¿ğ‘˜L_{k}italic_L start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT values, which are roughly (2â¢L)ksuperscript2ğ¿ğ‘˜(2L)^{k}( 2 italic_L ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT. To achieve this, we restrict the coordinates by requiring xkâ‰¤Bsubscriptğ‘¥ğ‘˜ğµx_{k}\leq Bitalic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT â‰¤ italic_B, and then we can use Lk=(2â‹…B+1)ksubscriptğ¿ğ‘˜superscriptâ‹…2ğµ1ğ‘˜L_{k}=(2\cdot B+1)^{k}italic_L start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT = ( 2 â‹… italic_B + 1 ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT. This ensures that the function fğ‘“fitalic_f remains injective on the sets Vâˆ’Vğ‘‰ğ‘‰V-Vitalic_V - italic_V and V+Vğ‘‰ğ‘‰V+Vitalic_V + italic_V.

## 2. Main results

Let Bâ‰¥0ğµ0B\geq 0italic_B â‰¥ 0 be an integer. Define:
W=W(m,L,B)={x=(x1,â€¦,xm)âˆˆâ„•mâˆ§x1â‰¤B,â€¦,xmâ‰¤B}W=W(m,L,B)=\{x=(x_{1},\ldots,x_{m})\in\mathbb{N}^{m}\land x_{1}\leq B,\ldots,x% _{m}\leq B\}italic_W = italic_W ( italic_m , italic_L , italic_B ) = { italic_x = ( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) âˆˆ blackboard_N start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT âˆ§ italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT â‰¤ italic_B , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT â‰¤ italic_B }(2.1)
Clearly, if m=0âˆ¨L=0âˆ¨B=0ğ‘š0ğ¿0ğµ0m=0\lor L=0\lor B=0italic_m = 0 âˆ¨ italic_L = 0 âˆ¨ italic_B = 0, then |Wâ¢(m,L,B)|=1ğ‘Šğ‘šğ¿ğµ1|W(m,L,B)|=1| italic_W ( italic_m , italic_L , italic_B ) | = 1. Therefore, in the following formulas, we may assume m>0,L>0,B>0formulae-sequenceğ‘š0formulae-sequenceğ¿0ğµ0m>0,~{}L>0,~{}B>0italic_m > 0 , italic_L > 0 , italic_B > 0. For 1â‰¤kâ‰¤m1ğ‘˜ğ‘š1\leq k\leq m1 â‰¤ italic_k â‰¤ italic_m, let Hk={x:x=(x1,â€¦,xm)âˆˆWâ¢(m,L,B)âˆ§xkâ‰¥B+1}subscriptğ»ğ‘˜conditional-setğ‘¥ğ‘¥subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šğ‘Šğ‘šğ¿ğµsubscriptğ‘¥ğ‘˜ğµ1H_{k}=\{x:x=(x_{1},\ldots,x_{m})\in W(m,L,B)\land x_{k}\geq B+1\}italic_H start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT = { italic_x : italic_x = ( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) âˆˆ italic_W ( italic_m , italic_L , italic_B ) âˆ§ italic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT â‰¥ italic_B + 1 }. We easily have |H1âˆ©â€¦âˆ©Hk|=|Vâ¢(m,Lâˆ’kâ¢(B+1))|=(m+Lâˆ’kâ¢(B+1)m)subscriptğ»1â€¦subscriptğ»ğ‘˜ğ‘‰ğ‘šğ¿ğ‘˜ğµ1binomialğ‘šğ¿ğ‘˜ğµ1ğ‘š|H_{1}\cap\ldots\cap H_{k}|=|V(m,L-k(B+1))|=\binom{m+L-k(B+1)}{m}| italic_H start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT âˆ© â€¦ âˆ© italic_H start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT | = | italic_V ( italic_m , italic_L - italic_k ( italic_B + 1 ) ) | = ( FRACOP start_ARG italic_m + italic_L - italic_k ( italic_B + 1 ) end_ARG start_ARG italic_m end_ARG ), since for any xâˆˆH1âˆ©â€¦âˆ©Hkğ‘¥subscriptğ»1â€¦subscriptğ»ğ‘˜x\in H_{1}\cap\ldots\cap H_{k}italic_x âˆˆ italic_H start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT âˆ© â€¦ âˆ© italic_H start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT, the first kğ‘˜kitalic_k coordinates are each at least B+1ğµ1B+1italic_B + 1. Thus, we are left with a coordinate sum of at most Lâˆ’kâ¢(B+1)ğ¿ğ‘˜ğµ1L-k(B+1)italic_L - italic_k ( italic_B + 1 ) for the shifted vector (x1âˆ’(B+1),â€¦,xkâˆ’(B+1),xk+1,â€¦,xm)subscriptğ‘¥1ğµ1â€¦subscriptğ‘¥ğ‘˜ğµ1subscriptğ‘¥ğ‘˜1â€¦subscriptğ‘¥ğ‘š(x_{1}-(B+1),\ldots,x_{k}-(B+1),x_{k+1},\ldots,x_{m})( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT - ( italic_B + 1 ) , â€¦ , italic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT - ( italic_B + 1 ) , italic_x start_POSTSUBSCRIPT italic_k + 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ). Because this holds for any choice of kğ‘˜kitalic_k coordinate indices, using the inclusion-exclusion principle, we obtain:
|Wâ¢(m,L,B)|=|Vâ¢(m,L)âˆ–(H1âˆªâ€¦âˆªHm)|=ğ‘Šğ‘šğ¿ğµğ‘‰ğ‘šğ¿subscriptğ»1â€¦subscriptğ»ğ‘šabsent\displaystyle|W(m,L,B)|=|V(m,L)\setminus(H_{1}\cup\ldots\cup H_{m})|=| italic_W ( italic_m , italic_L , italic_B ) | = | italic_V ( italic_m , italic_L ) âˆ– ( italic_H start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT âˆª â€¦ âˆª italic_H start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) | =|Vâ¢(m,L)|+âˆ‘k=1âŒŠLB+1âŒ‹(âˆ’1)kâ¢(mk)â¢(m+Lâˆ’kâ¢(B+1)m)=ğ‘‰ğ‘šğ¿superscriptsubscriptğ‘˜1ğ¿ğµ1superscript1ğ‘˜binomialğ‘šğ‘˜binomialğ‘šğ¿ğ‘˜ğµ1ğ‘šabsent\displaystyle|V(m,L)|+\sum_{k=1}^{\lfloor\frac{L}{B+1}\rfloor}(-1)^{k}\binom{m% }{k}\binom{m+L-k(B+1)}{m}=| italic_V ( italic_m , italic_L ) | + âˆ‘ start_POSTSUBSCRIPT italic_k = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT âŒŠ divide start_ARG italic_L end_ARG start_ARG italic_B + 1 end_ARG âŒ‹ end_POSTSUPERSCRIPT ( - 1 ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT ( FRACOP start_ARG italic_m end_ARG start_ARG italic_k end_ARG ) ( FRACOP start_ARG italic_m + italic_L - italic_k ( italic_B + 1 ) end_ARG start_ARG italic_m end_ARG ) =âˆ‘k=0âŒŠLB+1âŒ‹(âˆ’1)kâ¢(mk)â¢(m+Lâˆ’kâ¢(B+1)m)superscriptsubscriptğ‘˜0ğ¿ğµ1superscript1ğ‘˜binomialğ‘šğ‘˜binomialğ‘šğ¿ğ‘˜ğµ1ğ‘š\displaystyle\sum_{k=0}^{\lfloor\frac{L}{B+1}\rfloor}(-1)^{k}\binom{m}{k}% \binom{m+L-k(B+1)}{m}âˆ‘ start_POSTSUBSCRIPT italic_k = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT âŒŠ divide start_ARG italic_L end_ARG start_ARG italic_B + 1 end_ARG âŒ‹ end_POSTSUPERSCRIPT ( - 1 ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT ( FRACOP start_ARG italic_m end_ARG start_ARG italic_k end_ARG ) ( FRACOP start_ARG italic_m + italic_L - italic_k ( italic_B + 1 ) end_ARG start_ARG italic_m end_ARG )(2.2)
So we have:
|Wâ¢(m,L,B)|=âˆ‘k=0âŒŠLB+1âŒ‹(âˆ’1)kâ¢(mk)â¢(m+Lâˆ’kâ¢(B+1)m)ğ‘Šğ‘šğ¿ğµsuperscriptsubscriptğ‘˜0ğ¿ğµ1superscript1ğ‘˜binomialğ‘šğ‘˜binomialğ‘šğ¿ğ‘˜ğµ1ğ‘š|W(m,L,B)|=\sum_{k=0}^{\lfloor\frac{L}{B+1}\rfloor}(-1)^{k}\binom{m}{k}\binom{% m+L-k(B+1)}{m}| italic_W ( italic_m , italic_L , italic_B ) | = âˆ‘ start_POSTSUBSCRIPT italic_k = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT âŒŠ divide start_ARG italic_L end_ARG start_ARG italic_B + 1 end_ARG âŒ‹ end_POSTSUPERSCRIPT ( - 1 ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT ( FRACOP start_ARG italic_m end_ARG start_ARG italic_k end_ARG ) ( FRACOP start_ARG italic_m + italic_L - italic_k ( italic_B + 1 ) end_ARG start_ARG italic_m end_ARG )(2.3)
To obtain the required set of integers Uğ‘ˆUitalic_U, consider the function
g:(x1,â€¦,xm)â†’âˆ‘k=0mâˆ’1xkâ¢(2â‹…B+1)k:ğ‘”â†’subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘šsuperscriptsubscriptğ‘˜0ğ‘š1subscriptğ‘¥ğ‘˜superscriptâ‹…2ğµ1ğ‘˜g:(x_{1},\ldots,x_{m})\rightarrow\sum_{k=0}^{m-1}x_{k}(2\cdot B+1)^{k}italic_g : ( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ) â†’ âˆ‘ start_POSTSUBSCRIPT italic_k = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_m - 1 end_POSTSUPERSCRIPT italic_x start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT ( 2 â‹… italic_B + 1 ) start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT, and define U=Uâ¢(m,L,B)={gâ¢(x):xâˆˆWâ¢(m,L,B)}ğ‘ˆğ‘ˆğ‘šğ¿ğµconditional-setğ‘”ğ‘¥ğ‘¥ğ‘Šğ‘šğ¿ğµU=U(m,L,B)=\{g(x):x\in W(m,L,B)\}italic_U = italic_U ( italic_m , italic_L , italic_B ) = { italic_g ( italic_x ) : italic_x âˆˆ italic_W ( italic_m , italic_L , italic_B ) }. It is clear that gğ‘”gitalic_g is injective on both W+Wğ‘Šğ‘ŠW+Witalic_W + italic_W and Wâˆ’Wğ‘Šğ‘ŠW-Witalic_W - italic_W.

We have:
sâ¢(U):=|U+U|=|W+W|=|Wâ¢(k,2â¢L,2â¢B)|assignğ‘ ğ‘ˆğ‘ˆğ‘ˆğ‘Šğ‘Šğ‘Šğ‘˜2ğ¿2ğµs(U):=|U+U|=|W+W|=|W(k,2L,2B)|italic_s ( italic_U ) := | italic_U + italic_U | = | italic_W + italic_W | = | italic_W ( italic_k , 2 italic_L , 2 italic_B ) |(2.4)
since for each vector in W+Wğ‘Šğ‘ŠW+Witalic_W + italic_W, the coordinate sum is at most 2â¢L2ğ¿2L2 italic_L, and each coordinate is at most 2â¢B2ğµ2B2 italic_B.

To compute |Wâˆ’W|ğ‘Šğ‘Š|W-W|| italic_W - italic_W |, observe that xâˆˆWâˆ’Wğ‘¥ğ‘Šğ‘Šx\in W-Witalic_x âˆˆ italic_W - italic_W if and only if the absolute value of each coordinate is at most BğµBitalic_B, the sum of positive coordinates is at most Lğ¿Litalic_L, and the absolute value of the sum of the remaining non-positive coordinates is also at most Lğ¿Litalic_L. Suppose there are kğ‘˜kitalic_k positive coordinates. Then, we can choose their positions in (mk)binomialğ‘šğ‘˜\binom{m}{k}( FRACOP start_ARG italic_m end_ARG start_ARG italic_k end_ARG ) ways. There are |Wâ¢(k,Lâˆ’k,Bâˆ’1)|ğ‘Šğ‘˜ğ¿ğ‘˜ğµ1|W(k,L-k,B-1)|| italic_W ( italic_k , italic_L - italic_k , italic_B - 1 ) | ways to set these kğ‘˜kitalic_k coordinates. For the remaining mâˆ’kğ‘šğ‘˜m-kitalic_m - italic_k coordinates, there are |Wâ¢(mâˆ’k,L,B)|ğ‘Šğ‘šğ‘˜ğ¿ğµ|W(m-k,L,B)|| italic_W ( italic_m - italic_k , italic_L , italic_B ) | choices to assign values to the non-positive coordinates. Since these choices are independent:
dâ¢(U):=|Uâˆ’U|=|Wâˆ’W|=âˆ‘k=0minâ¡(m,L)(mk)â‹…|Wâ¢(k,Lâˆ’k,Bâˆ’1)|â‹…|Wâ¢(mâˆ’k,L,B)|assignğ‘‘ğ‘ˆğ‘ˆğ‘ˆğ‘Šğ‘Šsuperscriptsubscriptğ‘˜0ğ‘šğ¿â‹…binomialğ‘šğ‘˜ğ‘Šğ‘˜ğ¿ğ‘˜ğµ1ğ‘Šğ‘šğ‘˜ğ¿ğµd(U):=|U-U|=|W-W|=\sum_{k=0}^{\min(m,L)}\binom{m}{k}\cdot|W(k,L-k,B-1)|\cdot|W% (m-k,L,B)|italic_d ( italic_U ) := | italic_U - italic_U | = | italic_W - italic_W | = âˆ‘ start_POSTSUBSCRIPT italic_k = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT roman_min ( italic_m , italic_L ) end_POSTSUPERSCRIPT ( FRACOP start_ARG italic_m end_ARG start_ARG italic_k end_ARG ) â‹… | italic_W ( italic_k , italic_L - italic_k , italic_B - 1 ) | â‹… | italic_W ( italic_m - italic_k , italic_L , italic_B ) |(2.5)
Since each coordinate is at most BğµBitalic_B, we may assume Lâ‰¤mâ¢Bğ¿ğ‘šğµL\leq mBitalic_L â‰¤ italic_m italic_B. The maximum of Uğ‘ˆUitalic_U, denoted maxâ¡(U)ğ‘ˆ\max(U)roman_max ( italic_U ), is obtained when the coordinate sum reaches its maximum, namely Lğ¿Litalic_L. So in a greedy way set the largest coordinates to BğµBitalic_B, while we can, then set a coordinate to L%â¢Bpercentğ¿ğµL\%Bitalic_L % italic_B, and set the rest to zero.

For example, if m=4,L=8,B=3formulae-sequenceğ‘š4formulae-sequenceğ¿8ğµ3m=4,~{}L=8,~{}B=3italic_m = 4 , italic_L = 8 , italic_B = 3, then maxâ¡(U)=3â‹…73+3â‹…72+2â‹…71=1190ğ‘ˆâ‹…3superscript73â‹…3superscript72â‹…2superscript711190\max(U)=3\cdot 7^{3}+3\cdot 7^{2}+2\cdot 7^{1}=1190roman_max ( italic_U ) = 3 â‹… 7 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT + 3 â‹… 7 start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT + 2 â‹… 7 start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT = 1190. In general, using t=âŒŠLBâŒ‹ğ‘¡ğ¿ğµt=\lfloor\frac{L}{B}\rflooritalic_t = âŒŠ divide start_ARG italic_L end_ARG start_ARG italic_B end_ARG âŒ‹, we can compute:
qâ¢(U):=2â¢maxâ¡(U)+1=(2â¢B+1)mâˆ’(2â¢B+1)mâˆ’t+2â¢(L%â¢B)â¢(2â¢B+1)mâˆ’tâˆ’1+1assignğ‘ğ‘ˆ2ğ‘ˆ1superscript2ğµ1ğ‘šsuperscript2ğµ1ğ‘šğ‘¡2percentğ¿ğµsuperscript2ğµ1ğ‘šğ‘¡11q(U):=2\max(U)+1=(2B+1)^{m}-(2B+1)^{m-t}+2(L\%B)(2B+1)^{m-t-1}+1italic_q ( italic_U ) := 2 roman_max ( italic_U ) + 1 = ( 2 italic_B + 1 ) start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT - ( 2 italic_B + 1 ) start_POSTSUPERSCRIPT italic_m - italic_t end_POSTSUPERSCRIPT + 2 ( italic_L % italic_B ) ( 2 italic_B + 1 ) start_POSTSUPERSCRIPT italic_m - italic_t - 1 end_POSTSUPERSCRIPT + 1(2.6)
###### Example 2.1.

For m=4,L=8,B=3formulae-sequenceğ‘š4formulae-sequenceğ¿8ğµ3m=4,~{}L=8,~{}B=3italic_m = 4 , italic_L = 8 , italic_B = 3, we have U=Uâ¢(4,8,3)ğ‘ˆğ‘ˆ483U=U(4,8,3)italic_U = italic_U ( 4 , 8 , 3 ) with: |U|=221,sâ¢(U)=|U+U|=2075,dâ¢(U)=|Uâˆ’U|=2307,qâ¢(U)=2â¢maxâ¡(U)+1=2381formulae-sequenceformulae-sequenceğ‘ˆ221ğ‘ ğ‘ˆğ‘ˆğ‘ˆ2075ğ‘‘ğ‘ˆğ‘ˆğ‘ˆ2307ğ‘ğ‘ˆ2ğ‘ˆ12381|U|=221,s(U)=|U+U|=2075,d(U)=|U-U|=2307,q(U)=2\max(U)+1=2381| italic_U | = 221 , italic_s ( italic_U ) = | italic_U + italic_U | = 2075 , italic_d ( italic_U ) = | italic_U - italic_U | = 2307 , italic_q ( italic_U ) = 2 roman_max ( italic_U ) + 1 = 2381. These values yield: Î¸â‰¥1+logâ¡(|Uâˆ’U||U+U|)logâ¡(2â‹…maxâ¡(U)+1)=1.013631ğœƒ1ğ‘ˆğ‘ˆğ‘ˆğ‘ˆâ‹…2ğ‘ˆ11.013631\theta\geq 1+\frac{\log{(\frac{|U-U|}{|U+U|})}}{\log{(2\cdot\max(U)+1)}}=1.013% 631italic_Î¸ â‰¥ 1 + divide start_ARG roman_log ( divide start_ARG | italic_U - italic_U | end_ARG start_ARG | italic_U + italic_U | end_ARG ) end_ARG start_ARG roman_log ( 2 â‹… roman_max ( italic_U ) + 1 ) end_ARG = 1.013631.

###### Theorem 2.2.

For the sums and differences of sets problem, we have 
Î¸â‰¥1.173050ğœƒ1.173050\theta\geq 1.173050italic_Î¸ â‰¥ 1.173050.

Proof. Larger values of mğ‘šmitalic_m and Lğ¿Litalic_L yield very large integers for sâ¢(U),dâ¢(U)ğ‘ ğ‘ˆğ‘‘ğ‘ˆs(U),~{}d(U)italic_s ( italic_U ) , italic_d ( italic_U ) and |U|ğ‘ˆ|U|| italic_U |. Therefore, we first use floating-point arithmetic to search for good candidates yielding larger values of Î¸ğœƒ\thetaitalic_Î¸, and then confirm these values using integer arithmetic.

The formula in (2.3) can result in large numerical errors when using floating-point arithmetic, as it involves an alternating sum. Grouping positive and negative terms does not sufficiently mitigate this precision issue. Thus, when only an approximation of Wâ¢(m,L,B)ğ‘Šğ‘šğ¿ğµW(m,L,B)italic_W ( italic_m , italic_L , italic_B ) is needed, we compute it exactly using integer arithmetic and then round the result.

To find a better value than AlphaEvolveâ€™s Î¸=1.1584ğœƒ1.1584\theta=1.1584italic_Î¸ = 1.1584, we performed a somewhat restricted search with 1â‰¤mâ‰¤128,L=64formulae-sequence1ğ‘š128ğ¿641\leq m\leq 128,~{}L=641 â‰¤ italic_m â‰¤ 128 , italic_L = 64 and 1â‰¤Bâ‰¤71ğµ71\leq B\leq 71 â‰¤ italic_B â‰¤ 7. In less than one second (on a single CPU core), the search revealed that the maximum value, Î¸=1.162997ğœƒ1.162997\theta=1.162997italic_Î¸ = 1.162997, is achieved for m=80,L=64,B=5formulae-sequenceğ‘š80formulae-sequenceğ¿64ğµ5m=80,~{}L=64,~{}B=5italic_m = 80 , italic_L = 64 , italic_B = 5. Integer arithmetic confirms this value of Î¸ğœƒ\thetaitalic_Î¸.

In these small-scale searches, we observed that for fixed Lğ¿Litalic_L, the largest Î¸ğœƒ\thetaitalic_Î¸ value tends to occur when B=5ğµ5B=5italic_B = 5 and mâ‰ˆ54â¢Lğ‘š54ğ¿m\approx\frac{5}{4}Litalic_m â‰ˆ divide start_ARG 5 end_ARG start_ARG 4 end_ARG italic_L. In the above example, this relation holds exactly, though it is not universally true. For L=216=65536ğ¿superscript21665536L=2^{16}=65536italic_L = 2 start_POSTSUPERSCRIPT 16 end_POSTSUPERSCRIPT = 65536, we searched values of mğ‘šmitalic_m near 54â‹…65536=81920â‹…546553681920\frac{5}{4}\cdot 65536=81920divide start_ARG 5 end_ARG start_ARG 4 end_ARG â‹… 65536 = 81920, and found that (via floating point estimation) that m=81411ğ‘š81411m=81411italic_m = 81411 likely provides the best Î¸ğœƒ\thetaitalic_Î¸ value. Using exact integer arithmetic, we confirmed in approximately 15151515 hours that Î¸=1.173050ğœƒ1.173050\theta=1.173050italic_Î¸ = 1.173050 for m=81411,L=65536,B=5formulae-sequenceğ‘š81411formulae-sequenceğ¿65536ğµ5m=81411,~{}L=65536,~{}B=5italic_m = 81411 , italic_L = 65536 , italic_B = 5. Rounding the calculated exact values gives:
|U|â‰ˆ6.314107319â‹…1043546ğ‘ˆâ‹…6.314107319superscript1043546\displaystyle|U|\approx 6.314107319\cdot 10^{43546}| italic_U | â‰ˆ 6.314107319 â‹… 10 start_POSTSUPERSCRIPT 43546 end_POSTSUPERSCRIPTsâ¢(U)=|U+U|â‰ˆ3.208492702â‹…1061228ğ‘ ğ‘ˆğ‘ˆğ‘ˆâ‹…3.208492702superscript1061228\displaystyle s(U)=|U+U|\approx 3.208492702\cdot 10^{61228}italic_s ( italic_U ) = | italic_U + italic_U | â‰ˆ 3.208492702 â‹… 10 start_POSTSUPERSCRIPT 61228 end_POSTSUPERSCRIPTdâ¢(U)=|Uâˆ’U|â‰ˆ6.587554451â‹…1075899ğ‘‘ğ‘ˆğ‘ˆğ‘ˆâ‹…6.587554451superscript1075899\displaystyle d(U)=|U-U|\approx 6.587554451\cdot 10^{75899}italic_d ( italic_U ) = | italic_U - italic_U | â‰ˆ 6.587554451 â‹… 10 start_POSTSUPERSCRIPT 75899 end_POSTSUPERSCRIPTqâ¢(U)=2â¢maxâ¡(U)+1â‰ˆ6.605282799â‹…1084780ğ‘ğ‘ˆ2ğ‘ˆ1â‹…6.605282799superscript1084780\displaystyle q(U)=2\max(U)+1\approx 6.605282799\cdot 10^{84780}italic_q ( italic_U ) = 2 roman_max ( italic_U ) + 1 â‰ˆ 6.605282799 â‹… 10 start_POSTSUPERSCRIPT 84780 end_POSTSUPERSCRIPT
For efficient integer and floating-point arithmetic, we used the (free) GMP library: [2]. The GMP code and the exact computed values for the triple m=81411,L=65536,B=5formulae-sequenceğ‘š81411formulae-sequenceğ¿65536ğµ5m=81411,~{}L=65536,~{}B=5italic_m = 81411 , italic_L = 65536 , italic_B = 5 are available in [1].

Further improvements might be possible by increasing the value of Lğ¿Litalic_L, but any additional gain is likely to be less than 0.00010.00010.00010.0001 beyond the achieved value of Î¸=1.173050ğœƒ1.173050\theta=1.173050italic_Î¸ = 1.173050.

## References

- [1] Sums and differences of sets. https://bit.ly/43mWCVC

- [2] The GNU Multiple Precision Arithmetic Library. https://gmplib.org/

- [3] K. Gyarmati, F. Hennecart, and I. Z. Ruzsa (2007). Sums and differences of finite sets. Functiones et Approximatio Commentarii Mathematici, 37(1):175â€“186, 2007. https://gyarmatikati.web.elte.hu/publ/sumdiffv.pdf

- [4] Alexander Novikov, NgÃ¢n Vu, Marvin Eisenberger, Emilien Dupont, Po-Sen Huang, Adam Zsolt Wagner, Sergey Shirobokov, Borislav Kozlovskii, Francisco J. R. Ruiz, Abbas Mehrabian, M. Pawan Kumar, Abigail See, Swarat Chaudhuri, George Holland, Alex Davies, Sebastian Nowozin, Pushmeet Kohli and Matej Balog (2025). AlphaEvolve: A coding agent for scientific and algorithmic discovery. http://bit.ly/4jkeOoX
